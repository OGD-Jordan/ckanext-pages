/**
 * @license Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */
!function(){var t={scrolling:{true:"yes",false:"no"},frameborder:{true:"1",false:"0"}};function e(e){var i=this instanceof CKEDITOR.ui.dialog.checkbox;if(e.hasAttribute(this.id)){var a=e.getAttribute(this.id);i?this.setValue(t[this.id].true==a.toLowerCase()):this.setValue(a)}}function i(e){var i=""===this.getValue(),a=this instanceof CKEDITOR.ui.dialog.checkbox,l=this.getValue();i?e.removeAttribute(this.att||this.id):a?e.setAttribute(this.id,t[this.id][l]):e.setAttribute(this.att||this.id,l)}CKEDITOR.dialog.add("ckanview",(function(t){var a=t.lang.ckanview,l=t.lang.common;t.plugins.dialogadvtab;return{title:a.title,minWidth:350,minHeight:260,onShow:function(){this.fakeImage=this.iframeNode=null;var e=this.getSelectedElement();if(e&&e.data("ckan-view-embed")&&"true"==e.data("ckan-view-embed")){this.fakeImage=e;var i=t.restoreRealElement(e);this.iframeNode=i,this.setupContent(i)}},onOk:function(){var e;e=this.fakeImage?this.iframeNode:new CKEDITOR.dom.element("iframe");var i={},a={"data-ckan-view-embed":"true"};this.commitContent(e,i,a),e.setAttributes({"data-ckan-view-embed":"true"});var l=t.createFakeElement(e,"ckan-view-fake","iframe",!0);l.setAttributes(a),l.setStyles(i);var n=e.getAttribute("width")||"80",r=e.getAttribute("height")||"80";"%"===n.charAt(n.length-1)&&(n="960"),"%"===r.charAt(r.length-1)&&(r="400"),l.setAttributes({src:"http://placehold.it/"+n+"x"+r+"&text=CKAN+View"}),this.fakeImage?(l.replace(this.fakeImage),t.getSelection().selectElement(l)):t.insertElement(l)},contents:[{id:"info",label:l.generalTab,accessKey:"I",elements:[{type:"vbox",padding:0,children:[{id:"src",type:"text",label:l.url,required:!0,validate:CKEDITOR.dialog.validate.notEmpty(a.noUrl),setup:e,commit:i}]},{type:"hbox",children:[{id:"width",type:"text",requiredContent:"iframe[width]",style:"width:100%",labelLayout:"vertical",label:l.width,validate:CKEDITOR.dialog.validate.htmlLength(l.invalidHtmlLength.replace("%1",l.width)),setup:e,commit:i},{id:"height",type:"text",requiredContent:"iframe[height]",style:"width:100%",labelLayout:"vertical",label:l.height,validate:CKEDITOR.dialog.validate.htmlLength(l.invalidHtmlLength.replace("%1",l.height)),setup:e,commit:i},{id:"align",type:"select",requiredContent:"iframe[align]",default:"",items:[[l.notSet,""],[l.alignLeft,"left"],[l.alignRight,"right"],[l.alignTop,"top"],[l.alignMiddle,"middle"],[l.alignBottom,"bottom"]],style:"width:100%",labelLayout:"vertical",label:l.align,setup:function(t,i){if(e.apply(this,arguments),i){var a=i.getAttribute("align");this.setValue(a&&a.toLowerCase()||"")}},commit:function(t,e,a){i.apply(this,arguments),this.getValue()&&(a.align=this.getValue())}}]}]}]}}))}();